/*
sigplus editor button
@author  Levente Hunyadi
@version 1.5.0
@remarks Copyright (C) 2011-2017 Levente Hunyadi
@remarks Licensed under GNU/GPLv3, see http://www.gnu.org/licenses/gpl-3.0.html
@see     http://hunyadi.info.hu/projects/sigplus
*/
'use strict';Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);function getJoomlaEditorInstance(d){var a=window.parent.Joomla;if(a&&(a=a.editors)&&(a=a.instances)&&a.hasOwnProperty(d))return a[d]}function insertTag(d,a,c){a="{"+a+c+"}myfolder{/"+a+"}";c=window.parent;var e=getJoomlaEditorInstance(d);e?e.replaceSelection(a):(0,c.jInsertEditorText)(a,d);(0,c.jModalClose)()}
function fromQueryString(d){var a={};1<d.length&&d.substr(1).split("&").forEach(function(c){var d=c.indexOf("="),b=0<=d?c.substr(0,d):c;c=0<=d?c.substr(d+1):"";a[decodeURIComponent(b)]=decodeURIComponent(c)});return a}
document.addEventListener("DOMContentLoaded",function(){function d(b){b=b.getAttribute("name");var a=b.match(/^params\[(.*)\]$/);return a?a[1]:b}var a=document.getElementById("sigplus-settings-form"),c=[].slice.call(a.querySelectorAll("li")),e=window.parent.sigplus;e&&[].forEach.call(a.querySelectorAll("input[name][type=checkbox],input[name][type=radio],input[name][type=text],select[name]"),function(b){var a=d(b);if(a=e[a])b.matches("input[name][type=checkbox]")?b.checked=!!a:b.matches("input[name][type=radio]")&&
b.value===""+a?b.checked=!0:b.matches("input[name][type=text],select[name]")&&(b.value=a)});[].forEach.call(c,function(a){var b=document.createElement("input");b.setAttribute("type","checkbox");[].forEach.call(a.querySelectorAll("input[name][type=checkbox],input[name][type=radio],input[name][type=text],select[name]"),function(a){a.addEventListener("focus",function(){b.checked=!0})});a.insertBefore(b,a.firstChild)});document.getElementById("sigplus-settings-submit").addEventListener("click",function(){var a=
[];[].forEach.call(c,function(b){var c=b.querySelector("input[type=checkbox]");if((b=b.querySelector("input[name][type=checkbox]:checked,input[name][type=radio]:checked,input[name][type=text],select[name]"))&&c&&c.checked&&(c=d(b),b=b.value)){if(/color$/.test(c)||!/^(0|[1-9]\d*)$/.test(b))b='"'+b+'"';a.push(c+"="+b)}});var f=0<a.length?" "+a.join(" "):"";insertTag(fromQueryString(window.location.search).editor,e.tag_gallery,f)})});
